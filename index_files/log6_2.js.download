

function wtslog6_1918864(alias,dbn,obj,event_name,event_conversion){
   return wtslog7_2(alias,dbn,obj,event_name,event_conversion);
}

function wtslog6(alias,dbn,obj,event_name,event_conversion){
   return wtslog7_2(alias,dbn,obj,event_name,event_conversion);
}

function wtslog7_2(alias,db,obj,event_name,event_conversion){

   var web_url = 'www.web-stat.com';
   var app_url = 'wts.one';
   var app_name = 'Web-Stat';

   if (document.readyState === 'loading'){
      if (typeof document.addEventListener === 'function'){
         document.addEventListener("DOMContentLoaded", function(){ wtslog7_2(alias,db,obj,event_name,event_conversion); });
         return;
      }
      else{
         document.getElementById('wts'+alias).innerHTML = '<a href="https://'+web_url+'"><img alt="'+app_name+' Web Analytics" src="https://'+app_url+'/7/'+db+'/'+alias+'.png"></a>';
      }
   }


   window.onunload = function(){};

   window.onbeforeunload = function(){};

   window.onerror = function(){ return true; };

   var versionNumber,gmtimeUnix,timeLastLoad,isNewSession,sessionId,visitorId,nVisits,referer,title,url,scrH,scrW,scrC,doNotTrack,
       checkedOnline,originalRef,isOwner,isEvent,params,invisible,conversion_number,page_name,group_name,checked_online,locRef,locUrl,
       qry,cs,newSpan,s,counter_element_id,user_id;


   versionNumber = "7.20";

   user_id = "";
   checkedOnline = "";

   gmtimeUnix = Math.floor(Date.now()/1000);

   // clean input
   if (typeof wts7 !== 'undefined'){
      params = wts7.params || '';
      invisible = wts7.invisible || '';
      conversion_number = wts7.conversion_number || '';
      page_name = wts7.page_name || '';
      group_name = wts7.group_name || '';
   }
   else{
      params = '';
      invisible = '';
      conversion_number = '';
      page_name = '';
      group_name = '';
   }

   visitorId = '';

   doNotTrack = navigator.doNotTrack;
   if (doNotTrack != "1" && doNotTrack != "yes"){
      doNotTrack = "0";
   }
   scrH = screen.height || 0;
   scrW = screen.width || 0;
   scrC = screen.colorDepth || 0;
   checked_online = '';

   if (typeof event_name !== 'undefined'){

      isEvent = 'yes';
      invisible = 'yes';
      conversion_number = event_conversion || '';
      event_name = event_name.replace(/^\s+|\s+$/g,'');
      event_name = encodeURIComponent(event_name);
      page_name = 'event_'+event_name;
      group_name = event_name;
      url = event_name;
      title = event_name;

   }
   else{

      isEvent = 'no';

      if (page_name != ''){
         page_name = encodeURIComponent(page_name);
      }
      if (group_name != ''){
         group_name = encodeURIComponent(group_name);
      }

      title = document.title || '';
      title = encodeURIComponent(title);

      url = document.URL || '';

      try{
         referer = top.document.referrer || '';
      }
      catch(e){
         referer = document.referrer || '';
      }
      if (referer.length > 510){
         referer = referer.substring(0,510);
      }

   }


   // decide session status

   timeLastLoad = localStorage.getItem("tll_"+alias) || getCookie('tll_'+alias) || 0;
   sessionId = localStorage.getItem("sid_"+alias) || getCookie('sid_'+alias) || '';
   nVisits = localStorage.getItem("nv_"+alias) || getCookie('nv_'+alias) || 0;
   visitorId = localStorage.getItem("vid_"+alias) || getCookie('vid_'+alias) || '';
   isOwner = localStorage.getItem("io_"+alias) || getCookie('io_'+alias) || 0;
   originalRef = localStorage.getItem("or_"+alias) || getCookie('or_'+alias) || '';


   // if values exist store them in both storage and cookies
   if (timeLastLoad != 0){
      document.cookie = 'tll_'+alias+'='+timeLastLoad+'; path=/; SameSite=None; Secure; Expires=Sun, 03 Jan 2100 00:00:01 GMT';
      localStorage.setItem('tll_'+alias, timeLastLoad);
   }
   if (sessionId != ''){
      document.cookie = 'sid_'+alias+'='+sessionId+'; path=/; SameSite=None; Secure;';
      localStorage.setItem('sid_'+alias, sessionId);
   }
   if (nVisits != 0){
      document.cookie = 'nv_'+alias+'='+nVisits+'; path=/; SameSite=None; Secure; Expires=Sun, 03 Jan 2100 00:00:01 GMT';
      localStorage.setItem('nv_'+alias, nVisits);
   }
   if (visitorId != ''){
      document.cookie = 'vid_'+alias+'='+visitorId+'; path=/; SameSite=None; Secure; Expires=Sun, 03 Jan 2100 00:00:01 GMT';
      localStorage.setItem('vid_'+alias, visitorId);
   }
   if (isOwner != 0){
      document.cookie = 'io_'+alias+'='+isOwner+'; path=/; SameSite=None; Secure; Expires=Sun, 03 Jan 2100 00:00:01 GMT';
      localStorage.setItem('io_'+alias, isOwner);
   }
   if (originalRef != ''){
      document.cookie = 'or_'+alias+'='+originalRef+'; path=/; SameSite=None; Secure; Expires=Sun, 03 Jan 2100 00:00:01 GMT';
      localStorage.setItem('or_'+alias, originalRef);
   }


   if (user_id != '' && sessionStorage.getItem("uidsid_"+alias) == sessionId){ // already set on entrance page (d for done)
      user_id = 'd_'+user_id;
   }


   if (originalRef != ''){
      originalRef = encodeURIComponent(originalRef);
      originalRef = originalRef.replace(/&/g, "%oag");
   }

   if (referer != ''){
      referer = encodeURIComponent(referer);
      referer = referer.replace(/&/g, "%oag");
   }

   if (document.getElementById("wts"+alias)){
      counter_element_id = "wts"+alias;
   }
   else{
      counter_element_id = "wts";
   }


   url = encodeURIComponent(url);
   url = url.replace(/&/g, "%oag");

   qry = alias+'&'+db+'&'+invisible+'&'+conversion_number+'&'+page_name+'&'+group_name+'&'+title+'&'+url+'&'+referer+'&'+
         originalRef+'&'+scrW+'x'+scrH+'&'+scrC+'&'+doNotTrack+'&'+sessionId+'&'+timeLastLoad+'&'+
         visitorId+'&'+nVisits+'&'+isOwner+'&'+params+'&'+isEvent+'&'+checkedOnline+'&'+user_id+'&'+versionNumber+'&'+Math.random();


   if (event_name){

      cs = document.createElement("script"); 
      cs.type = "text/javascript";
      cs.async = "async";
      cs.src = "https://"+app_url+"/count7.pl?"+qry;
      s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(cs, s);

      if (obj){
         cs.onload = function(){ 
            redirect7_2(obj);
         };
         return false;
      }

   }
   else {

      newSpan = document.createElement("span");
      newSpan.setAttribute("id", "wtstimer"+alias);
      newSpan.style.display = "none";
      document.body.appendChild(newSpan);

      cs = document.createElement("script"); 
      cs.type = "text/javascript";
      cs.async = "async";
      cs.src = "https://"+app_url+"/count7.pl?"+qry;
      s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(cs, s);
      cs.onload = function(){ 
         finalProcessing7_2(alias,db,app_url,gmtimeUnix,params,invisible,0);
      };

   }


}



////////////////////////
function redirect7_2(obj){

   var new_window;

   if (obj.target){ 	
      try{	
         new_window = window.open(obj.href, obj.target); 	
      }
      catch(e){
         try{
            window.top.location = obj.href;	
         }
         catch(e){
            window.location = obj.href;	
         }
      }		
   }		 
   else{ 	
      try{	
         window.top.location = obj.href;	
      }	
      catch(e){
         window.location = obj.href;	
      }
   }		
	
}



/////////////////////////////////////////////////////////////////////
function finalProcessing7_2(alias,db,app_url,gmtimeUnix,params,invisible,loop){

   var pingId,panelId,status,exclude_hit,counterType,response,ajaxRequest,ajaxRequest2,msg;

   if (document.getElementById("wtstimer"+alias).innerHTML){
      response = document.getElementById("wtstimer"+alias).innerHTML;
   }

   if (response.indexOf("::") == -1){
      loop++;
      if (loop < 100){
         setTimeout( function(){ finalProcessing7_2(alias,db,app_url,gmtimeUnix,params,invisible,loop); }, 100);
         return;
      }
      return;
   }

   response = response.split("::");
   status = response[5];

   if (status != "premium"){
      return;
   }

   exclude_hit = response[6];
   counterType = response[7];
   pingId = db+"&"+alias+"&"+response[0]+"&"+response[1]+"&"+response[2]+"&"+response[3]+"&"+response[4];
   panelId = db+"&"+alias+"&"+response[1]+"&"+response[0]+"&"+response[8];

   if (params != "no_count" && exclude_hit != "yes"){
      ajaxRequest = new XMLHttpRequest();
      pingPage7_2(alias,pingId,gmtimeUnix,0,ajaxRequest,app_url);
   }


   // init panel update
   if (counterType == "panel" && invisible != "yes"){
      msg = "https://"+app_url+"/get_panel_data.pl?"+panelId+"&"+Math.random();
      ajaxRequest2 = new XMLHttpRequest();
      ajaxRequest2.onreadystatechange = function(){ 
         if (ajaxRequest2.readyState==4 && ajaxRequest2.status==200){
            updatePanelDisplay7_2(ajaxRequest2,alias,msg);
         }
      };
      getPanelData7_2(alias,msg,ajaxRequest2);
   }

}



///////////////////////////////////////////////////////////////////////
function pingPage7_2(alias,pingId,startTime,delay,ajaxRequest,app_url){ 

   var currTime,msg;

   currTime = Math.floor(Date.now()/1000);
   if (currTime > startTime + 3600){
      return; // quit after 60 minutes
   }

   if (document.visibilityState != "hidden"){

      delay = delay + 1000;
      msg = "https://"+app_url+"/ping_timer.pl?"+pingId+"&"+delay;
      ajaxRequest.open('GET', msg, true);
      ajaxRequest.send();
      setTimeout( function(){ pingPage7_2(alias,pingId,startTime,delay,ajaxRequest,app_url); }, delay );

   }
   else{

      setTimeout( function(){ pingPage7_2(alias,pingId,startTime,0,ajaxRequest,app_url); }, 2000 );

   }

} 




////////////////////////////////////////
function getPanelData7_2(alias,msg,ajaxRequest2){ 

   msg = msg+"::"+Math.random();
   ajaxRequest2.open('GET', msg, true);
   ajaxRequest2.send();

}


//////////////////////////////////////////////////////
function updatePanelDisplay7_2(ajaxRequest2,alias,msg){

   var focusTest,response,previous_count,now_count,previous_delay,delay,done_updating;

   response = ajaxRequest2.responseText.split("::");

   if (response[0] == 'OK'){

      previous_count = parseInt(document.getElementById("wts_last_"+alias).innerHTML);
      previous_delay = parseInt(document.getElementById("wts_delay_"+alias).innerHTML);

      now_count = parseInt(response[1]);

      document.getElementById("wts_p_online_"+alias).innerHTML = response[2].toLocaleString();

      done_updating = 1;

      if (document.getElementById("wts_dot_"+alias).style.opacity == 1){
         blink7_2("wts_dot_"+alias,0,0);
      }

      if (now_count > previous_count){
         done_updating = 0;
         animateIncrement7_2(alias,now_count,previous_count);
      }

      document.getElementById("wts_last_"+alias).innerHTML = response[1];

      if (now_count > previous_count && previous_delay > 3000){
         delay = previous_delay - 1000;
      }
      else {
         delay = previous_delay + 1000;
      }

      if (delay > 60000){ delay = 60000; }
      if (delay < 3000){ delay = 3000; }

      document.getElementById("wts_delay_"+alias).innerHTML = delay;

      setTimeout( function(){ done_updating = 1; }, 20000);

      if (document.visibilityState != "hidden" && done_updating){
         setTimeout( function(){ getPanelData7_2(alias,msg,ajaxRequest2); }, delay);
      }
      else{
         document.getElementById("wts_delay_"+alias).innerHTML = 0;
         focusTest = setInterval( 
            function(){ 
               if (document.visibilityState != "hidden" && done_updating){ 
                  clearInterval(focusTest);
                  getPanelData7_2(alias,msg,ajaxRequest2);
               }
            }, 
            2000 );
      }

   }


   function animateIncrement7_2(alias,now_count,previous_count){
     previous_count++;
      document.getElementById("wts_p_count_"+alias).innerHTML = previous_count.toLocaleString();
      if (previous_count < now_count){
         if (now_count - previous_count < 10){
            setTimeout( function(){ animateIncrement7_2(alias,now_count,previous_count); }, 300);
         }
         else if (now_count - previous_count < 100){
            setTimeout( function(){ animateIncrement7_2(alias,now_count,previous_count); }, 50);
         }
      }
      else{
         if (document.getElementById("wts_dot_"+alias).style.opacity == 1){
            blink7_2("wts_p_count_"+alias,0,1);
         }
      }
   }

   function blink7_2(id,opacity,update){
      if (opacity > 1){
         opacity = 1;
      }
      document.getElementById(id).style.opacity = opacity;
      if (opacity < 1){
         opacity = opacity+0.05;
         setTimeout( function(){ blink7_2(id,opacity,update); }, 100);
      }
      else{
         if (update == "1"){
            done_updating = 1;
         }
      }
   }

}


///////////////////////////
function getCookie(cname) {
  var name = cname + "=";
  var ca = document.cookie.split(';');
  for(var i = 0; i < ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}



if (typeof wtsh !== 'undefined'){
   var wts7 = {};
   if (wtsh.invisible == '#'){ wtsh.invisible=''; }
   if (wtsh.page_name == '#'){ wtsh.page_name=''; }
   if (wtsh.page_group == '#'){ wtsh.page_group=''; }
   if (wtsh.conversion_number == '#'){ wtsh.conversion_number=''; }
   wts7 = wtsh;
   wts7.group_name = wts7.page_group;
}

wtslog7_2('1918864','4');

